var H=Object.defineProperty;var J=(b,v,E)=>v in b?H(b,v,{enumerable:!0,configurable:!0,writable:!0,value:E}):b[v]=E;var q=(b,v,E)=>J(b,typeof v!="symbol"?v+"":v,E);(function(b){typeof define=="function"&&define.amd?define(b):b()})(function(){"use strict";const b='.ideabosque-ai-drawer{height:0;width:0;position:fixed;padding:0;bottom:0!important;right:unset;top:unset;left:unset;border:0;box-sizing:border-box;overflow:hidden;margin:0;background-color:transparent!important;font-family:IBM Plex Sans}.ideabosque-ai-iframe{border-radius:20px;overflow:hidden;border:0;position:relative;z-index:1}.ideabosque-ai-drawer-body{position:fixed;left:0;top:0;bottom:0;z-index:999;transform:translateX(-100%);background:#faf7f0;box-shadow:0px 4px 12px 0px #00000014}.ideabosque-ai-drawer-body .ideabosque-ai-iframe{height:100%!important;border-radius:0!important}.ideabosque-ai-drawer-body{transition:all .3s ease-in-out}.ideabosque-ai-drawer-switch{transition:all .3s ease}.ideabosque-ai-drawer-switch{position:fixed;bottom:104px;left:0;height:56px;background:#fff;border-radius:28px;padding:0 4px;border:2px solid #F3F4F6;box-shadow:0px 4px 12px 0px #00000014;cursor:pointer;transform:translateX(24px);opacity:1;z-index:0;display:flex;align-items:center}.ideabosque-ai-drawer-switch::after{display:block;content:"";width:48px;height:48px;background-image:url(https://shopify-airobot-entry.pages.dev/send.svg?v=1.0);background-size:cover;background-repeat:no-repeat;background-position:center center}.ideabosque-ai-window-close{width:32px;height:32px;z-index:2;position:absolute;right:16px;top:16px;background-image:url(https://shopify-airobot-entry.pages.dev/close.svg?v=1.0);background-size:cover;background-repeat:no-repeat;background-position:center center;cursor:pointer}.ideabosque-ai-drawer-switch>.ideabosque-ai-drawer-switch-icon{width:48px;height:48px;border-radius:50%;background-image:url(https://shopify-airobot-entry.pages.dev/avatar.svg?v=1.0);background-size:cover;background-repeat:no-repeat;background-position:center center;display:block!important}.ideabosque-ai-drawer-switch>.ideabosque-ai-drawer-switch-content{margin:0 12px;flex:1}.ideabosque-ai-drawer-switch-title{font-size:12px;color:#2E2E3A;font-weight:700;line-height:1;margin-bottom:6px}.ideabosque-ai-drawer-switch-desc{font-size:16px;color:#2E2E3A;font-weight:400;line-height:1}.ideabosque-ai-drawer-open .ideabosque-ai-drawer-body{transform:translateX(0)}.ideabosque-ai-drawer-open .ideabosque-ai-drawer-switch{visibility:hidden;transform:translateX(-100%);opacity:0}@media(max-width:640px){.ideabosque-ai-iframe{width:100vw!important}}@media(max-width:980px){}',v="https://shopify-ai-chat.pages.dev",E="https://fonts.googleapis.com/css2?family=Hind&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Source+Sans+3:ital,wght@0,200..900;1,200..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap";function S(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var _={exports:{}},O;function N(){return O||(O=1,function(a){var e=Object.prototype.hasOwnProperty,t="~";function c(){}Object.create&&(c.prototype=Object.create(null),new c().__proto__||(t=!1));function m(i,r,n){this.fn=i,this.context=r,this.once=n||!1}function w(i,r,n,o,f){if(typeof n!="function")throw new TypeError("The listener must be a function");var p=new m(n,o||i,f),l=t?t+r:r;return i._events[l]?i._events[l].fn?i._events[l]=[i._events[l],p]:i._events[l].push(p):(i._events[l]=p,i._eventsCount++),i}function y(i,r){--i._eventsCount===0?i._events=new c:delete i._events[r]}function d(){this._events=new c,this._eventsCount=0}d.prototype.eventNames=function(){var r=[],n,o;if(this._eventsCount===0)return r;for(o in n=this._events)e.call(n,o)&&r.push(t?o.slice(1):o);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(n)):r},d.prototype.listeners=function(r){var n=t?t+r:r,o=this._events[n];if(!o)return[];if(o.fn)return[o.fn];for(var f=0,p=o.length,l=new Array(p);f<p;f++)l[f]=o[f].fn;return l},d.prototype.listenerCount=function(r){var n=t?t+r:r,o=this._events[n];return o?o.fn?1:o.length:0},d.prototype.emit=function(r,n,o,f,p,l){var g=t?t+r:r;if(!this._events[g])return!1;var s=this._events[g],x=arguments.length,k,u;if(s.fn){switch(s.once&&this.removeListener(r,s.fn,void 0,!0),x){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,n),!0;case 3:return s.fn.call(s.context,n,o),!0;case 4:return s.fn.call(s.context,n,o,f),!0;case 5:return s.fn.call(s.context,n,o,f,p),!0;case 6:return s.fn.call(s.context,n,o,f,p,l),!0}for(u=1,k=new Array(x-1);u<x;u++)k[u-1]=arguments[u];s.fn.apply(s.context,k)}else{var G=s.length,C;for(u=0;u<G;u++)switch(s[u].once&&this.removeListener(r,s[u].fn,void 0,!0),x){case 1:s[u].fn.call(s[u].context);break;case 2:s[u].fn.call(s[u].context,n);break;case 3:s[u].fn.call(s[u].context,n,o);break;case 4:s[u].fn.call(s[u].context,n,o,f);break;default:if(!k)for(C=1,k=new Array(x-1);C<x;C++)k[C-1]=arguments[C];s[u].fn.apply(s[u].context,k)}}return!0},d.prototype.on=function(r,n,o){return w(this,r,n,o,!1)},d.prototype.once=function(r,n,o){return w(this,r,n,o,!0)},d.prototype.removeListener=function(r,n,o,f){var p=t?t+r:r;if(!this._events[p])return this;if(!n)return y(this,p),this;var l=this._events[p];if(l.fn)l.fn===n&&(!f||l.once)&&(!o||l.context===o)&&y(this,p);else{for(var g=0,s=[],x=l.length;g<x;g++)(l[g].fn!==n||f&&!l[g].once||o&&l[g].context!==o)&&s.push(l[g]);s.length?this._events[p]=s.length===1?s[0]:s:y(this,p)}return this},d.prototype.removeAllListeners=function(r){var n;return r?(n=t?t+r:r,this._events[n]&&y(this,n)):(this._events=new c,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=t,d.EventEmitter=d,a.exports=d}(_)),_.exports}var P=N();const z=S(P),h="ideabosque";class I{constructor(e){q(this,"iframe");q(this,"event",new z);q(this,"init",()=>{window.addEventListener("message",this.onMessage)});q(this,"sendMessage",(e,t)=>{const c=JSON.stringify(t),m=`${h}-${e}`;this.win.postMessage({type:m,data:c},"*")});q(this,"on",(e,t)=>(this.event.on(e,t),this.event));q(this,"onMessage",e=>{var m;const t=e.data.type;let c=e.data.data;if((m=t==null?void 0:t.includes)!=null&&m.call(t,h)){const w=t.replace(`${h}-`,"");c&&(c=JSON.parse(c)),this.event.emit(w,c)}});this.iframe=e,this.init()}get win(){return this.iframe.contentWindow}}const M=a=>{const e=a.getAttribute("width")||640,t=a.getAttribute("height")||600;return{width:e,height:t}},B=()=>new Promise((a,e)=>{window.navigator.geolocation.getCurrentPosition(c=>{a(c.coords.toJSON())},async c=>{e(c)})}),F={stringify:a=>Object.keys(a).map(t=>`${t}=${a[t]}`).join("&")};let L=v;const $=`${h}-style`,A=`${h}-google-font`,j=()=>new Promise(a=>{const e=document.querySelector("head"),t=document.createElement("link");t.onload=()=>a(void 0),t.setAttribute("rel","stylesheet"),t.setAttribute("data-role",A),t.href=E,e==null||e.appendChild(t)}),T=()=>{const a=document.querySelector("head"),e=document.createElement("style");e.setAttribute("data-role",$),e.innerHTML=b,a==null||a.appendChild(e)},D=()=>{const a=`script[data-role='${h}-ai']`;return document.querySelector(a)},R=(a,e)=>{T();const t=M(e),c=document.createElement("iframe"),m=e.getAttribute("iframe-url"),w=e.getAttribute("agent"),y=e.getAttribute("userId"),d=e.getAttribute("question"),i=e.getAttribute("endpoint-id"),r=e.getAttribute("coordination"),n=e.getAttribute("agent-name")||"";m&&(L=m);const o=F.stringify({agent:w,userId:y,question:d,agentName:n,endpointId:i,coordination:r,mode:"preview"});return c.src=`${L}?${o}`,c.className=`${h}-ai-iframe`,c.style.width=t.width+"px",c.style.height=t.height+"px",c.setAttribute("frameborder","0"),c.setAttribute("allow","geolocation"),a.appendChild(c),c},X=a=>{const e=new I(a);e.on("get-position",async()=>{let t=!0,c={};try{c=await B()}catch{t=!1}e.sendMessage("get-position",{...c,success:t})})};(()=>{let a=!1,e=null;const t=D(),c=()=>{const i=document.createElement("div"),r=document.createElement("div");return i.className=`${h}-ai-window-close`,i.appendChild(r),i},m=()=>{const i=document.createElement("div"),r=document.createElement("div"),n=document.createElement("div"),o=`${h}-ai-drawer-switch`;return r.className=`${h}-ai-drawer-switch-icon`,n.className=`${h}-ai-drawer-switch-content`,i.className=o,i.appendChild(r),i.appendChild(n),n.innerHTML=`
      <div class="${h}-ai-drawer-switch-title">B2B Chat Agent</div>
      <div class="${h}-ai-drawer-switch-desc">Get Net 30 at checkout</div>
    `,i},w=async(i=!0)=>{var s;const r=document.body;e=document.createElement("div");const n=document.createElement("div"),o=c(),f=m(),p=`${h}-ai-drawer`,l=`${h}-ai-drawer-body`,g=`${h}-ai-drawer-open`;e.className=p,e.setAttribute("popover","manual"),n.className=l,e.appendChild(n),e.appendChild(f),n.appendChild(o),r.appendChild(e),X(R(n,t)),i&&((s=e==null?void 0:e.showPopover)==null||s.call(e),e.classList.add(g)),f.addEventListener("click",()=>{e==null||e.classList.toggle(g)}),o.addEventListener("click",()=>{e==null||e.classList.toggle(g)})},y=()=>document.querySelector(`style[data-role="${$}"]`),d=()=>document.querySelector(`link[data-role="${A}"]`);window.initIdeabosqueAi=async(i=!0)=>{a||(j(),w(i),a=!0)},window.removeIdeabosqueAi=()=>{if(!a)return;const i=document.body,r=document.head,n=[y(),d()];e&&i.removeChild(e);for(const o of n)o&&r.removeChild(o);a=!1}})()});
